[gd_scene load_steps=19 format=3 uid="uid://eyteytkq2ruo"]

[ext_resource type="Texture2D" uid="uid://b2r0n6a37r7sy" path="res://Gun/NewCar GunPlateform.png" id="1_4gs73"]
[ext_resource type="Texture2D" uid="uid://cimiwuvyq4ygi" path="res://Gun/NewCar GunBarrel.png" id="2_f23c4"]
[ext_resource type="Script" uid="uid://dd1wh25t6up83" path="res://Gun/roof_gun_turret.gd" id="2_n4x0o"]
[ext_resource type="Texture2D" uid="uid://btbfj5ijpuhkp" path="res://Gun/NewCar GunTurretBase.png" id="3_n4x0o"]

[sub_resource type="AtlasTexture" id="AtlasTexture_sumad"]
atlas = ExtResource("1_4gs73")
region = Rect2(0, 0, 160, 160)

[sub_resource type="SpriteFrames" id="SpriteFrames_ua8ps"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_sumad")
}],
"loop": true,
"name": &"basic_plateform",
"speed": 5.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_psoqe"]
atlas = ExtResource("2_f23c4")
region = Rect2(0, 0, 160, 160)

[sub_resource type="SpriteFrames" id="SpriteFrames_7uja0"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_psoqe")
}],
"loop": true,
"name": &"basic_barrel",
"speed": 5.0
}]

[sub_resource type="Gradient" id="Gradient_f23c4"]
offsets = PackedFloat32Array(0, 0.636119)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_n4x0o"]
gradient = SubResource("Gradient_f23c4")
fill = 1
fill_from = Vector2(0.525641, 0.495726)

[sub_resource type="Gradient" id="Gradient_sumad"]
offsets = PackedFloat32Array(0, 0.239892)
colors = PackedColorArray(0.943296, 0.930431, 0.0305549, 1, 0.495, 0.445, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_ua8ps"]
gradient = SubResource("Gradient_sumad")
fill = 1
fill_from = Vector2(0.504274, 0.5)

[sub_resource type="AtlasTexture" id="AtlasTexture_nth1s"]
atlas = ExtResource("3_n4x0o")
region = Rect2(0, 0, 160, 160)

[sub_resource type="SpriteFrames" id="SpriteFrames_3v2yb"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_nth1s")
}],
"loop": true,
"name": &"basic_body",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_f23c4"]
radius = 8.06226

[sub_resource type="Animation" id="Animation_n4x0o"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("RotatingTurret/TurretBody:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("RotatingTurret/Barrel:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("RotatingTurret/Barrel/PointLight2D:enabled")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("RotatingTurret/Barrel/turretflash:emitting")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_f23c4"]
resource_name = "turret shot"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("RotatingTurret/TurretBody:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.05),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-1, 0), Vector2(-2, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("RotatingTurret/Barrel:position")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(-5, 0), Vector2(0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("RotatingTurret/Barrel/PointLight2D:enabled")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.0666667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [false, true, false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("RotatingTurret/Barrel/turretflash:emitting")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.0333333),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/4/type = "method"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("RotatingTurret")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0.1),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"_fire_bullet"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_sumad"]
_data = {
&"RESET": SubResource("Animation_n4x0o"),
&"turret shot": SubResource("Animation_f23c4")
}

[node name="RoofGun" type="Node2D"]

[node name="GunPlateform" type="AnimatedSprite2D" parent="."]
texture_filter = 1
position = Vector2(0, -2.5)
rotation = 1.5708
sprite_frames = SubResource("SpriteFrames_ua8ps")
animation = &"basic_plateform"

[node name="RotatingTurret" type="CharacterBody2D" parent="."]
position = Vector2(-14, -2.5)
collision_layer = 8
collision_mask = 0
script = ExtResource("2_n4x0o")

[node name="Barrel" type="AnimatedSprite2D" parent="RotatingTurret"]
texture_filter = 1
rotation = 1.5708
sprite_frames = SubResource("SpriteFrames_7uja0")
animation = &"basic_barrel"

[node name="PointLight2D" type="PointLight2D" parent="RotatingTurret/Barrel"]
position = Vector2(2.5, -39.2278)
rotation = -1.5708
enabled = false
color = Color(1, 0.580836, 0.155312, 1)
energy = 3.0
texture = SubResource("GradientTexture2D_n4x0o")

[node name="turretflash" type="CPUParticles2D" parent="RotatingTurret/Barrel"]
position = Vector2(2.5, -38.1656)
texture = SubResource("GradientTexture2D_ua8ps")
lifetime = 0.5
one_shot = true
speed_scale = 10.0
explosiveness = 0.8
randomness = 0.76
local_coords = true
direction = Vector2(0, -1)
spread = 20.0
gravity = Vector2(0, 0)
initial_velocity_min = 20.0
initial_velocity_max = 50.0

[node name="TurretBody" type="AnimatedSprite2D" parent="RotatingTurret"]
texture_filter = 1
position = Vector2(-1, 0)
rotation = 1.5708
sprite_frames = SubResource("SpriteFrames_3v2yb")
animation = &"basic_body"

[node name="CollisionShape2D" type="CollisionShape2D" parent="RotatingTurret"]
position = Vector2(-5, 2.5)
shape = SubResource("CircleShape2D_f23c4")

[node name="TurretAnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_sumad")
}
